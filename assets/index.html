<!doctype html>
<html>
  <head>
    <title>El Podcast DEV [LIVE]</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="/styles/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <section id="app" class="app">
      <header class="header">
        <span class="branding">
          <img src="https://cdn.simplecast.com/images/20122399-3919-4089-b540-10f66a258c04/8734f16b-187a-41cb-9a6f-34ff0f2ee6c5/640x640/1551986909artwork.jpg" />
        </span>
        <div class="audio">
          <div class="player">
            <i class="material-icons" @click="playPause" v-show="!isPlaying">play_arrow</i>
            <i class="material-icons" @click="playPause" v-show="isPlaying">pause</i>
            <input type="range" min="0" max="100" v-model="volume" />
            <i class="material-icons" @click="mute" v-show="parseInt(volume, 10)!==0">volume_up</i>
            <i class="material-icons" @click="mute" v-show="parseInt(volume, 10)===0">volume_off</i>
            <audio controls ref="elPlayer">
              <source src="http://188.165.240.90:8292/stream" type="audio/mp3">
              Your browser does not support the audio tag. {{vol}}
            </audio>
          </div>
          <span class="status">{{status}}</span>
        </div>
        <div class="opts">
          <i class="material-icons" @click="logout" v-show="username">exit_to_app</i>
          <i class="material-icons" @click="clearChat">clear</i>
        </div>
      </header>
      <div class="messages">
        <div class="messagesHolder">
          <div :class="'message ' + itm.username" v-for="itm in messages">
            <span v-if="itm.username !== 'SYSTEM'">{{itm.username}}: </span>{{itm.message}}
          </div>
        </div>
      </div>
      <form @submit.prevent="submit" class="elform" v-if="username">
        {{username}}
        <input
          autocomplete="off"
          v-model="message"
          placeholder="Mensage"
          @keyup.arrow-keys="navigateHistory"
          @paste="pasting"
        />
        <button>Enviar</button>
      </form>
      <div class="sendImg" v-if="tmpImg">
        <img :src="tmpImg"/>
        <div class="btns">
          <div class="btn send" @click="sendImg">Enviar</div>
          <div class="btn cancel" @click="tmpImg=null">Cancelar</div>
        </div>
      </div>
      <div class="imagesHistory">
        <img
          :src="image"
          v-for="image in images"
          @click="displayImage = image"
        />
      </div>
      <div class="modal" v-if="displayImage" @click="displayImage=null">
        <div class="background"></div>
        <img
          class="loginWindow"
          :src="displayImage"
        />
      </div>
      <div class="modal" v-if="!username"><div class="background"></div>
        <form @submit.prevent="setUsername" class="loginWindow">
          Por favor indica tu nombre de usuario
          <div>
            <input v-model="loginUserName" /><button>Entrar</button>
          </div>
        </form>
      </div>
    </section>
    <script src="/scripts/app.js"></script>
  </body>
</html>
